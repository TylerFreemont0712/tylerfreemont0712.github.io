<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Tyler Freemont - Infrastructure Engineer with 2.5 years of experience. Based in Osaka, Japan. Specializing in cloud infrastructure, automation, and AI.">
    <meta name="keywords" content="infrastructure engineer, DevOps, Python, automation, cloud, AI, MLOps, Osaka, Japan">
    <meta name="author" content="Tyler Freemont">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    {% include head-custom.html %}
    {% seo %}
  </head>

  <body>
    <!-- Scanline overlay -->
    <div class="scanline-overlay"></div>

    <!-- Grid background -->
    <div class="grid-bg"></div>

    <!-- Top System Bar -->
    <nav class="system-bar">
      <div class="sysbar-left">
        <span class="sysbar-indicator"></span>
        <span class="sysbar-host">tyler@osaka</span>
        <span class="sysbar-sep">:</span>
        <span class="sysbar-path">~/portfolio</span>
      </div>
      <div class="sysbar-center">
        <a href="{{ '/' | relative_url }}" class="sysbar-tab {% if page.url == '/' %}active{% endif %}">
          <i class="fa-solid fa-terminal"></i> main
        </a>
        <a href="{{ '/projects' | relative_url }}" class="sysbar-tab {% if page.url contains 'projects' %}active{% endif %}">
          <i class="fa-solid fa-folder-tree"></i> projects
        </a>
      </div>
      <div class="sysbar-right">
        <span class="sysbar-clock" id="sysClock"></span>
        <a href="https://github.com/tylerfreemont0712" target="_blank" rel="noopener" class="sysbar-icon" title="GitHub">
          <i class="fa-brands fa-github"></i>
        </a>
        <a href="mailto:tfreemont0712@gmail.com" class="sysbar-icon" title="Email">
          <i class="fa-solid fa-envelope"></i>
        </a>
        <button class="nav-toggle" aria-label="Toggle navigation">
          <span></span><span></span><span></span>
        </button>
      </div>
      <!-- Mobile dropdown -->
      <div class="mobile-nav">
        <a href="{{ '/' | relative_url }}"><i class="fa-solid fa-terminal"></i> main</a>
        <a href="{{ '/projects' | relative_url }}"><i class="fa-solid fa-folder-tree"></i> projects</a>
        <a href="https://github.com/tylerfreemont0712" target="_blank" rel="noopener"><i class="fa-brands fa-github"></i> github</a>
        <a href="mailto:tfreemont0712@gmail.com"><i class="fa-solid fa-envelope"></i> email</a>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main class="dashboard">
      {{ content }}
    </main>

    <!-- Bottom Status Bar -->
    <footer class="status-bar">
      <div class="statusbar-left">
        <span class="status-led"></span>
        <span>SYSTEMS NOMINAL</span>
      </div>
      <div class="statusbar-center">
        <span>&copy; 2025 Tyler Freemont</span>
        <span class="statusbar-sep">&bull;</span>
        <span>Built with Jekyll & GitHub Pages</span>
      </div>
      <div class="statusbar-right">
        <span>Osaka, JP</span>
        <span class="statusbar-sep">&bull;</span>
        <span>34.69&deg;N 135.50&deg;E</span>
      </div>
    </footer>

    <script>
      // System clock
      function updateClock() {
        var now = new Date();
        var h = String(now.getHours()).padStart(2, '0');
        var m = String(now.getMinutes()).padStart(2, '0');
        var s = String(now.getSeconds()).padStart(2, '0');
        var el = document.getElementById('sysClock');
        if (el) el.textContent = h + ':' + m + ':' + s;
      }
      updateClock();
      setInterval(updateClock, 1000);

      // Mobile nav toggle
      document.querySelector('.nav-toggle').addEventListener('click', function() {
        document.querySelector('.mobile-nav').classList.toggle('active');
        this.classList.toggle('active');
      });

      // Animate elements on scroll
      var observer = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, { threshold: 0.08 });

      document.querySelectorAll('.pane, .gauge-fill, .timeline-entry, .proj-card').forEach(function(el) {
        observer.observe(el);
      });

      // Typing effect for terminal lines
      document.querySelectorAll('.term-typed').forEach(function(el) {
        var text = el.getAttribute('data-text');
        if (!text) return;
        el.textContent = '';
        var i = 0;
        var obs = new IntersectionObserver(function(entries) {
          if (entries[0].isIntersecting) {
            obs.disconnect();
            var interval = setInterval(function() {
              el.textContent += text[i];
              i++;
              if (i >= text.length) clearInterval(interval);
            }, 30);
          }
        }, { threshold: 0.5 });
        obs.observe(el);
      });
    </script>
  </body>
</html>
